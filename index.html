<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>第三次机器人大战·命运轮回</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background: #000;
  color: #0f0;
  font-family: monospace;
  padding: 10px;
}
button {
  font-size: 16px;
  margin: 5px;
}
.panel {
  border: 1px solid #0f0;
  padding: 10px;
  margin-bottom: 10px;
}
</style>
</head>
<body>

<h2>第三次机器人大战·命运轮回</h2>
<h3>第一话：暗云</h3>

<div class="panel">
<b>我方：高达</b><br>
HP: <span id="playerHP">120</span>
</div>

<div class="panel">
<b>敌方：扎古</b><br>
HP: <span id="enemyHP">100</span>
</div>

<div class="panel" id="log">战斗开始！</div>

<button onclick="attack()">攻击</button>
<button onclick="defend()">防御</button>
<button onclick="restart()">重新开始</button>

<script>
let playerHP = 120;
let enemyHP = 100;
let defending = false;

function update() {
  document.getElementById("playerHP").innerText = playerHP;
  document.getElementById("enemyHP").innerText = enemyHP;
}

function log(text) {
  document.getElementById("log").innerText = text;
}

function attack() {
  if (enemyHP <= 0 || playerHP <= 0) return;

  let dmg = Math.floor(Math.random() * 15) + 10;
  enemyHP -= dmg;
  log("你攻击了敌人，造成 " + dmg + " 点伤害！");
  update();

  if (enemyHP <= 0) {
    log("敌人被击破！任务完成！");
    return;
  }

  enemyTurn();
}

function defend() {
  defending = true;
  log("你采取了防御姿态！");
  enemyTurn();
}

function enemyTurn() {
  if (playerHP <= 0) return;

  let dmg = Math.floor(Math.random() * 12) + 8;
  if (defending) {
    dmg = Math.floor(dmg / 2);
    defending = false;
  }

  playerHP -= dmg;
  update();

  if (playerHP <= 0) {
    log("我方机体被击破……失败！");
  } else {
    log("敌人反击，造成 " + dmg + " 点伤害！");
  }
}

function restart() {
  playerHP = 120;
  enemyHP = 100;
  defending = false;
  log("战斗重新开始！");
  update();
}

update();
</script>

</body>
</html>